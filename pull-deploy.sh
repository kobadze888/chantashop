#!/bin/bash

# 1. рЃњрЃљрЃЊрЃљрЃАрЃЋрЃџрЃљ рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃЏрЃЌрЃљрЃЋрЃљрЃа рЃАрЃљрЃЦрЃљрЃдрЃљрЃџрЃЊрЃћрЃерЃў
cd /home/chantashop/htdocs/chantashop.ge || exit

echo "­Ъџђ рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃўрЃА рЃърЃарЃЮрЃфрЃћрЃАрЃў рЃўрЃгрЃДрЃћрЃЉрЃљ: chantashop-front"

# 2. рЃЎрЃЮрЃЊрЃўрЃА рЃњрЃљрЃЊрЃЏрЃЮрЃгрЃћрЃарЃљ GitHub-рЃўрЃЊрЃљрЃю
echo "­ЪЊЦ рЃЎрЃЮрЃЊрЃўрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ (Git Pull)..."
git pull origin main

# 3. рЃърЃљрЃЎрЃћрЃбрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ/рЃўрЃюрЃАрЃбрЃљрЃџрЃљрЃфрЃўрЃљ
# (рЃљрЃБрЃфрЃўрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ, рЃЌрЃБ рЃљрЃ«рЃљрЃџрЃў рЃљрЃўрЃЎрЃЮрЃюрЃћрЃЉрЃў рЃљрЃю рЃцрЃЮрЃюрЃбрЃћрЃЉрЃў рЃЊрЃљрЃЋрЃљрЃЏрЃљрЃбрЃћрЃЌ)
echo "­ЪЊд рЃърЃљрЃЎрЃћрЃбрЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ (npm install)..."
npm install

# 4. рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃ«рЃћрЃџрЃљрЃ«рЃљрЃџрЃў рЃљрЃгрЃДрЃЮрЃЉрЃљ
# Next.js-рЃА рЃАрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ Build, рЃарЃЮрЃЏ рЃљрЃ«рЃљрЃџрЃў рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃћрЃЉрЃў "рЃЊрЃљрЃўрЃюрЃљрЃ«рЃЮрЃА"
echo "­ЪЈЌ№ИЈ рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃљрЃгрЃДрЃЮрЃЉрЃљ (Build)..."
npm run build

# 5. рЃАрЃљрЃўрЃбрЃўрЃА рЃњрЃљрЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ
echo "­Ъћё PM2 рЃърЃарЃЮрЃфрЃћрЃАрЃўрЃА рЃарЃћрЃАрЃбрЃљрЃарЃбрЃў..."
pm2 restart chantashop-front

echo "РюЁ рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌ рЃЊрЃљрЃАрЃарЃБрЃџрЃЊрЃљ!"
